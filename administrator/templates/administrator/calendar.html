

{% block calendar %}

<!-- custom style -->
<style>
    .calendar-control{
        background:lightgray;
        margin:0;
        padding-top:5;
        padding-bottom:5;
    }
    .calendar-filter{
        margin:10px
    }
</style>

<!-- calendar style -->
<style>

* {
    float: none;
    background: none;
    margin: 0;
    padding: 0;
    font-family: Arial,Helvetica,sans-serif;
    font-size: 11px;
    padding: 0;
    margin: 0;
    -webkit-box-sizing: border-box;
    -moz-box-sizing: border-box;
    box-sizing: border-box;
    font-family: Arial,Helvetica,sans-serif;
    font-size: 11px;
    padding: 0;
    margin: 0;
}

tr {
    display: table-row;
    vertical-align: inherit;
    border-color: inherit;
}
table {
    width: 100%;
    margin: 2px auto 20px auto;
    border-collapse: collapse;
    background: #fff;
}


table {
    white-space: normal;
    line-height: normal;
    font-weight: normal;
    font-size: medium;
    font-style: normal;
    color: -internal-quirk-inherit;
    text-align: start;
    font-variant: normal;
    display: table;
    border-spacing: 2px;
    border-color: grey;
}

html {
    font-size: 10px;
    font-family: sans-serif;
    -webkit-tap-highlight-color: rgba(0,0,0,0);
    -webkit-text-size-adjust: 100%;
    -ms-text-size-adjust: 100%;
}
body {
    font-family: "Helvetica Neue",Helvetica,Arial,sans-serif;
    font-size: 14px;
    line-height: 1.42857143;
    color: #333;
    background-color: #fff;
}


:after, :before {
    -webkit-box-sizing: border-box;
    -moz-box-sizing: border-box;
    box-sizing: border-box;
}

tbody th {
    text-align: right;
    vertical-align: top;
    border-bottom: 1px solid #ccc;
    padding-right: 10px;
}
table th {
    text-align: left;
    background-color: #e9e9e9;
    padding: 5px;
    color: #555;
}
table, th, td {
    border: 1px solid black;
}
td, th {
    padding: 0;
}
th {
    text-align: left;
}
* {
    float: none;
    background: none;
    margin: 0;
    padding: 0;
}

* {
    -webkit-box-sizing: border-box;
    -moz-box-sizing: border-box;
    box-sizing: border-box;
}

th {
    font-weight: bold;
    text-align: -internal-center;
}
td, th {
    display: table-cell;
    vertical-align: inherit;
}
table td {
    text-align: left;
    vertical-align: top;
    padding: 5px;
    border-bottom: 1px solid #d5d5d5;
}
table, td {
    height: 100%;
}
table, th, td {
    border: 1px solid black;
}


table {
    white-space: normal;
    line-height: normal;
    font-weight: normal;
    font-size: medium;
    font-style: normal;
    color: -internal-quirk-inherit;
    text-align: start;
    font-variant: normal;
}

table {
    display: table;
    border-spacing: 2px;
    border-color: grey;
}
</style>

<div class="horario">
    <div style="height:346px;overflow:hidden">
    <div class="table-responsive"><table id="obj_7467903"><caption></caption>
    <thead>
    <tr class="odd">
        <th style="width: 60px" class="number"></th>
        <th>Lunes</th>
        <th>Martes</th>
        <th>Miércoles</th>
        <th>Jueves</th>
        <th>Viernes</th>
        <th>Sábado</th>
    </tr>
    </thead>
    <tbody>
    <tr class="even">
        <th id="horas" style="padding: 0; position:relative">
        <div class="hora" style="top:0px; height:21px;">08:00</div>
        <div class="hora" style="top:22px; height:21px;">09:00</div>
        <div class="hora" style="top:44px; height:21px;">10:00</div>
        <div class="hora" style="top:66px; height:21px;">11:00</div>
        <div class="hora" style="top:88px; height:21px;">12:00</div>
        <div class="hora" style="top:110px; height:21px;">13:00</div>
        <div class="hora" style="top:132px; height:21px;">14:00</div>
        <div class="hora" style="top:154px; height:21px;">15:00</div>
        <div class="hora" style="top:176px; height:21px;">16:00</div>
        <div class="hora" style="top:198px; height:21px;">17:00</div>
        <div class="hora" style="top:220px; height:21px;">18:00</div>
        <div class="hora" style="top:242px; height:21px;">19:00</div>
        <div class="hora" style="top:264px; height:21px;">20:00</div>
        <div class="hora" style="top:286px; height:21px;">21:00</div>
        <div id="line" class="reloj" style="top: 301px;"><span>21:38</span></div>   
    </th>
        {% for i in '123456'|make_list %}
        <td class="dia " style="">
            <div id="dia_{{i}}" style="height: 308px; position:relative">
                {% for d in weekReserves %}
                    <div class="bloque Ctedra c251233 " style="top:181.5px;height:32px;min-height:32px;left:0px;margin-right:0px;background-color:#ffc4a0;z-index:2">
                        <a href="https://www.u-cursos.cl/ingenieria/2018/1/CC7910/1/">{{d.item__name}}</a> 
                        <div>{{ d.item__reserve__start|date:'H:i' }} - {{ d.item__reserve__finish|date:'H:i' }}</div>
                        
                    </div>
                {% endfor %}
                <!-- 
                <div class="bloque Ctedra_Recuperativa c261717 " style="top:182.5px;height:43px;min-height:43px;left:25px;margin-right:0px;background-color:#fff8a8;z-index:3">
                    <a href="https://www.u-cursos.cl/ingenieria/2018/1/EP3203/1/">EP3203-1</a> Cátedra Recuperativa &nbsp; B02 &nbsp; 25/06/2018 &nbsp;16:15 - 18:15
                </div> 
                -->
            </div>
        </td>
        {% endfor %}
    </tr>
        </tbody>
    <col class="col0 first"><col class="col1"><col class="col2"><col class="col3"><col class="col4"><col class="col5"><col class="col6 last"></table></div>
    </div>
    
    <script>
    function hide2( o ) {
        if( o.tipo == undefined ) o.tipo = true;
        if( o.curso == undefined ) o.curso = true;
        o.style.visibility = o.tipo && o.curso ? 'visible' : 'hidden';
    }
    function hide_tipo( o ) { o.tipo = o.tipo != undefined && ! o.tipo; hide2( o ); }
    function hide_curso( o ) { o.curso = o.curso != undefined && ! o.curso; hide2( o ); }
    
    
    function line() {
        var l = $('line');
        var c = $('circle');
        var d = new Date();
        var h = d.getHours();
    
        if( d.getDay() && 8 <= h && h <= 21 ) {
            var p = $('horas');
            var c = $('circle');
            var m = d.getMinutes();
            var t = Math.round( ( ( h - 8 )*60 + m ) * p.getHeight() / ( (21 - 8 + 1 )*60 ) );
    
            if( ! l ) {
                l = new Element( 'div', {
                    'id': 'line',
                    'class': 'reloj',
                } );
                p.insert( { 'bottom': l } );
    
                c = new Element( 'div', {
                    'id': 'circle',
                    'class': 'circle',
                } );
                $('dia_'+d.getDay() ).insert( { 'bottom': c } );
    
            }
    
            l.update( '<span>'+( h < 10 ? '0' : '' )+h+':'+( m < 10 ? '0' : '' )+m+'</span>' );
            l.setStyle( { 'top': t+'px' } );
            c.setStyle( { 'top': t+'px' } );
            l.show();
    
        } else if( l ) {
            l.hide();
        }
    }
    
    $(document).ready( function() {
        line();
        setInterval( line, 1000 );
    } );
    
    </script>
    
    <!--   Calendar Controls   -->
    <div class='row calendar-control' >
        <div class='col-sm-5'>
            <a class='pull-right'>&lt&lt</a>
        </div>
        <div class='col-sm-1'>
            <a class='pull-right'>&lt</a>
        </div>
        <div class='col-sm-1'>
            <a class='pull-left'>&gt</a>
        </div>
        <div class='col-sm-5'>
            <a class='pull-left'>&gt&gt</a>
        </div>
    </div>

    <!--   Calendar Filter by 'Salas'   -->
    <div class='row calendar-filter'>
        <div class='col-sm-1'></div>
        {% for sala in rooms %}
        <div class='col-sm-2'>
            <label><input type="checkbox">{{sala.name}}</label>
        </div>
        {% endfor %}
        <div class='col-sm-1'></div>
    </div>
    
</div>
{% endblock %}
